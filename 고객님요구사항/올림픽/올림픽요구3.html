<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>올림픽</title>
    <link rel="stylesheet" href="올림픽.css">
</head>
<body>
    <!-- 
    원본 자바스크립트 소스 setInterval() 괄호 안 화살표 함수를 삭제하고,
    별도의 함수를 정의하세요. 
    -->
    <div class="track" id="track1"></div>
    <div class="track" id="track2"></div>
    <div class="track" id="track3"></div>
    <div class="track" id="track4"></div>
    <div class="track" id="track5"></div>

    <script>
        const NUM = 5;
        let finishedCount = 0;
        let winner = null;
        const tracks = document.querySelectorAll(".track");
        const athletes = [];

        for (let i = 0; i < NUM; i++) {
            const a = document.createElement("div");
            a.className = "athlete";
            a.style.left = "0";
            const n = document.createElement("div");
            n.className = "number";
            n.textContent = i + 1;
            a.appendChild(n);
            tracks[i].appendChild(a);
            athletes.push(a);
        }

        // const gameInterval = setInterval(() => {
        //     for (let i = 0; i < NUM; i++) moveAthlete(athletes[i], i);
        // }, 100);

        const gameInterval = setInterval(aaa, 100);
        function aaa() {
            for (let i = 0; i < NUM; i++) moveAthlete(athletes[i], i);
        }

        function moveAthlete(a, i) {
            const distance = Math.random() * 10;
            const currentLeft = parseFloat(a.style.left);
            const newLeft = currentLeft + distance;
            a.style.left = newLeft + "px";

            if (newLeft >= (tracks[i].clientWidth - 28) && !winner) {
                winner = a;
                a.style.backgroundColor = "blue";
                finishedCount++;
                if (finishedCount === 1) {
                    clearInterval(gameInterval);
                }
            }
        }
    </script>
</body>
</html>
